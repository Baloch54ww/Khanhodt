<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <title>پنل مدیریت BPB</title>
    <style>
        body {
            background-color: #f0f0f0;
            font-family: 'Tahoma', sans-serif;
            text-align: center;
            padding-top: 50px;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            width: 90%;
            max-width: 500px;
            margin: auto;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        input, button {
            width: 90%;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>ساخت لینک و کانفیگ BPB</h2>
        <input type="text" id="username" placeholder="نام کاربر">
        <input type="number" id="days" placeholder="تعداد روز اعتبار">
        <input type="number" id="limit" placeholder="حجم گیگابایت">
        <button onclick="generate()">تولید لینک و فایل کانفیگ</button>
        <p id="result" style="margin-top:20px;"></p>
        <a id="downloadLink" style="display:none; margin-top:20px;" download>دانلود فایل کانفیگ</a>
    </div>

    <script>
        function generate() {
            let user = document.getElementById('username').value;
            let days = document.getElementById('days').value;
            let limit = document.getElementById('limit').value;
            
            if(user && days && limit) {
                let now = new Date();
                now.setDate(now.getDate() + parseInt(days));
                let expDate = now.toISOString().slice(0,10);
                let link = `bpb://${user}?limit=${limit}GB&exp=${expDate}`;

                document.getElementById('result').innerText = "لینک ساخته شده:\n" + link;

                let configContent = `{
    "username": "${user}",
    "limit": "${limit}GB",
    "expire": "${expDate}"
}`;

                let blob = new Blob([configContent], { type: 'application/json' });
                let url = URL.createObjectURL(blob);

                let downloadLink = document.getElementById('downloadLink');
                downloadLink.href = url;
                downloadLink.download = user + "_config.json";
                downloadLink.style.display = "block";
                downloadLink.innerText = "دانلود فایل کانفیگ";
            } else {
                document.getElementById('result').innerText = "لطفاً همه فیلدها را پر کنید.";
                document.getElementById('downloadLink').style.display = "none";
            }
        }
    </script>
</body>
</html>
